<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>&quot;helpers/utils&quot; | @recallgraph/foxx-tracer - v1.0.0</title>
	<meta name="description" content="Documentation for @recallgraph/foxx-tracer - v1.0.0">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.json" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title">@recallgraph/foxx-tracer - v1.0.0</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="../globals.html">Globals</a>
				</li>
				<li>
					<a href="_helpers_utils_.html">&quot;helpers/utils&quot;</a>
				</li>
			</ul>
			<h1>Module &quot;helpers/utils&quot;</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<section class="tsd-panel tsd-comment">
				<div class="tsd-comment tsd-typography">
					<div class="lead">
						<p>This module exports a number of utility functions that are used throughout the application
							being traced. Some functions are specifically meant to be called at application startup to initialize the
						global tracer, set up trace headers, etc.</p>
					</div>
					<p><strong>This module is re-exported as a top-level export.</strong></p>
					<p>See the <a href="../index.html#quickstart">quickstart</a> for a primer on how
					to set up your application for tracing.</p>
				</div>
			</section>
			<section class="tsd-panel-group tsd-index-group">
				<h2>Index</h2>
				<section class="tsd-panel tsd-index-panel">
					<div class="tsd-index-content">
						<section class="tsd-index-section ">
							<h3>Enumerations</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-enum tsd-parent-kind-module"><a href="../enums/_helpers_utils_.trace_header_keys.html" class="tsd-kind-icon">TRACE_<wbr>HEADER_<wbr>KEYS</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Interfaces</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-interface tsd-parent-kind-module"><a href="../interfaces/_helpers_utils_.taskopts.html" class="tsd-kind-icon">Task<wbr>Opts</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Variables</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#baggageschema" class="tsd-kind-icon">baggage<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#contextschema" class="tsd-kind-icon">context<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#forcesampleschema" class="tsd-kind-icon">force<wbr>Sample<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#logschema" class="tsd-kind-icon">log<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#referenceschema" class="tsd-kind-icon">reference<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#spanarrschema" class="tsd-kind-icon">span<wbr>Arr<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#spanidschema" class="tsd-kind-icon">span<wbr>IdSchema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#spanreqschema" class="tsd-kind-icon">span<wbr>Req<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#spanschema" class="tsd-kind-icon">span<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#tagsschema" class="tsd-kind-icon">tags<wbr>Schema</a></li>
								<li class="tsd-kind-variable tsd-parent-kind-module"><a href="_helpers_utils_.html#traceidschema" class="tsd-kind-icon">trace<wbr>IdSchema</a></li>
							</ul>
						</section>
						<section class="tsd-index-section ">
							<h3>Functions</h3>
							<ul class="tsd-index-list">
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#attachspan" class="tsd-kind-icon">attach<wbr>Span</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#cleartracecontext" class="tsd-kind-icon">clear<wbr>Trace<wbr>Context</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#executetask" class="tsd-kind-icon">execute<wbr>Task</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#executetransaction" class="tsd-kind-icon">execute<wbr>Transaction</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#getparent" class="tsd-kind-icon">get<wbr>Parent</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#inittracer" class="tsd-kind-icon">init<wbr>Tracer</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#instrumentedquery" class="tsd-kind-icon">instrumented<wbr>Query</a></li>
								<li class="tsd-kind-function tsd-parent-kind-module"><a href="_helpers_utils_.html#startspan" class="tsd-kind-icon">start<wbr>Span</a></li>
							</ul>
						</section>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Variables</h2>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="baggageschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> baggage<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">baggage<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol"> = joi.object()</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L58">helpers/utils.ts:58</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A valid JSON object.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="contextschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> context<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">context<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ObjectSchema</span><span class="tsd-signature-symbol"> = joi.object().keys({trace_id: traceIdSchema.required(),span_id: spanIdSchema.required(),baggage: baggageSchema.required()}).unknown(true).optionalKeys(&#x27;baggage&#x27;, &#x27;trace_id&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L61">helpers/utils.ts:61</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A JSON object encoding a <a href="https://opentracing.io/specification/#spancontext">span context</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="forcesampleschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> force<wbr>Sample<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">force<wbr>Sample<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">BooleanSchema</span><span class="tsd-signature-symbol"> = joi.boolean()</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L151">helpers/utils.ts:151</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A boolean representing whether to force record or force suppress a trace.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="logschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> log<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">log<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ObjectSchema</span><span class="tsd-signature-symbol"> = joi.object().keys({fields: joi.object().pattern(/.+/, joi.any()).required(),timestamp: joi.number().required()}).optionalKeys(&#x27;timestamp&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L81">helpers/utils.ts:81</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A JSON object representing a <a href="https://opentracing.io/specification/#log-structured-data">span log</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="referenceschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> reference<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">reference<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ObjectSchema</span><span class="tsd-signature-symbol"> = joi.object().keys({type: joi.string().valid(REFERENCE_CHILD_OF, REFERENCE_FOLLOWS_FROM).required(),context: contextSchema.required()})</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L98">helpers/utils.ts:98</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A JSON object representing a
							<a href="https://opentracing.io/specification/#references-between-spans">span reference</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="spanarrschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> span<wbr>Arr<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">span<wbr>Arr<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ArraySchema</span><span class="tsd-signature-symbol"> = joi.array().items(spanSchema.required()).min(1)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L136">helpers/utils.ts:136</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>An array of span objects, each adhering to the <a href="_helpers_utils_.html#spanschema">span schema</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="spanidschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> span<wbr>IdSchema</h3>
					<div class="tsd-signature tsd-kind-icon">span<wbr>IdSchema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">StringSchema</span><span class="tsd-signature-symbol"> = joi.string().length(16)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L45">helpers/utils.ts:45</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A 16 character string representing a span ID.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="spanreqschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> span<wbr>Req<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">span<wbr>Req<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">AlternativesSchema</span><span class="tsd-signature-symbol"> = joi.alternatives().try(spanSchema, spanArrSchema).required()</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L145">helpers/utils.ts:145</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A single span or an array of spans, adhering to the <a href="_helpers_utils_.html#spanschema">span schema</a> or the
							<a href="_helpers_utils_.html#spanarrschema">span array schema</a> respectively.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="spanschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> span<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">span<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ObjectSchema</span><span class="tsd-signature-symbol"> = joi.object().keys({operation: joi.string().required(),context: contextSchema.required(),startTimeMs: joi.number().required(),finishTimeMs: joi.number().required().min(joi.ref(&#x27;startTimeMs&#x27;)),tags: tagsSchema.required(),logs: joi.array().items(logSchema.required()).required(),references: joi.array().items(referenceSchema.required()).required()}).optionalKeys(&#x27;tags&#x27;, &#x27;logs&#x27;, &#x27;references&#x27;)</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L109">helpers/utils.ts:109</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A JSON object representing a <a href="https://opentracing.io/specification/#the-opentracing-data-model">span</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="tagsschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> tags<wbr>Schema</h3>
					<div class="tsd-signature tsd-kind-icon">tags<wbr>Schema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">ObjectSchema</span><span class="tsd-signature-symbol"> = joi.object().pattern(/.+/, joi.alternatives().try(joi.string(), joi.boolean(), joi.number()).required())</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L72">helpers/utils.ts:72</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A JSON object representing a <a href="https://opentracing.io/specification/#set-a-span-tag">span tag</a>.</p>
						</div>
					</div>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module">
					<a name="traceidschema" class="tsd-anchor"></a>
					<h3><span class="tsd-flag ts-flagConst">Const</span> trace<wbr>IdSchema</h3>
					<div class="tsd-signature tsd-kind-icon">trace<wbr>IdSchema<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">AlternativesSchema</span><span class="tsd-signature-symbol"> = joi.alternatives().try(spanIdSchema, joi.string().length(32))</span></div>
					<aside class="tsd-sources">
						<ul>
							<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L50">helpers/utils.ts:50</a></li>
						</ul>
					</aside>
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<p>A 16 or 32 character string representing a trace ID.</p>
						</div>
					</div>
				</section>
			</section>
			<section class="tsd-panel-group tsd-member-group ">
				<h2>Functions</h2>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="attachspan" class="tsd-anchor"></a>
					<h3>attach<wbr>Span</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">attach<wbr>Span<span class="tsd-signature-symbol">(</span>fn<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Function</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">FunctionConstructor</span>, operation<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, options<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">SpanOptions</span>, onSuccess<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">(</span>result<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span>, onError<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-symbol">(</span>err<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Error</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">(Anonymous function)</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L546">helpers/utils.ts:546</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Creates a wrapper around the input function that, when invoked, executes the given function inside a new
										span. When you don&#39;t need to manually alter the span before it is closed and reported, the success
										and error callbacks can be omitted. In this case, when the function ends, it either returns its result
										(or void) back to the caller or throws an error. In both cases, the span enclosing the function&#39;s
										execution is always properly closed and reported, enriched with additional error information, if
									applicable.</p>
								</div>
								<p>On the other hand, when you need access to the span (at the end of the function) just before it is
									finalized, you can specify the success and error callbacks, within which you will have access to the span.
								You can now add your custom tags/logs to the span.</p>
								<p><strong>The span must be explicity closed in the body of both
									callbacks</strong> by invoking its <a href="https://opentracing-javascript.surge.sh/classes/span.html#finish">finish</a>
								method.</p>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>fn: <span class="tsd-signature-type">Function</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">FunctionConstructor</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The function to be wrapped in a span.</p>
									</div>
								</li>
								<li>
									<h5>operation: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The operation name to be recorded in the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> options: <span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol"> = {}</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											optional <a href="https://opentracing-javascript.surge.sh/interfaces/spanoptions.html">SpanOptions</a> object that
										describes the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagOptional">Optional</span> onSuccess: <span class="tsd-signature-symbol">(</span>result<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The optional success callback.</p>
									</div>
									<ul class="tsd-parameters">
										<li class="tsd-parameter-signature">
											<ul class="tsd-signatures tsd-kind-type-literal">
												<li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span>result<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">any</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
											</ul>
											<ul class="tsd-descriptions">
												<li class="tsd-description">
													<h4 class="tsd-parameters-title">Parameters</h4>
													<ul class="tsd-parameters">
														<li>
															<h5>result: <span class="tsd-signature-type">any</span></h5>
														</li>
														<li>
															<h5>span: <span class="tsd-signature-type">Span</span></h5>
														</li>
													</ul>
													<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
												</li>
											</ul>
										</li>
									</ul>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagOptional">Optional</span> onError: <span class="tsd-signature-symbol">(</span>err<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Error</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The optional error callback.</p>
									</div>
									<ul class="tsd-parameters">
										<li class="tsd-parameter-signature">
											<ul class="tsd-signatures tsd-kind-type-literal">
												<li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span>err<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Error</span>, span<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
											</ul>
											<ul class="tsd-descriptions">
												<li class="tsd-description">
													<h4 class="tsd-parameters-title">Parameters</h4>
													<ul class="tsd-parameters">
														<li>
															<h5>err: <span class="tsd-signature-type">Error</span></h5>
														</li>
														<li>
															<h5>span: <span class="tsd-signature-type">Span</span></h5>
														</li>
													</ul>
													<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
												</li>
											</ul>
										</li>
									</ul>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">(Anonymous function)</span></h4>
							<p>The wrapper function that accepts the same arguments as <em>fn</em>.</p>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="cleartracecontext" class="tsd-anchor"></a>
					<h3>clear<wbr>Trace<wbr>Context</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">clear<wbr>Trace<wbr>Context<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L313">helpers/utils.ts:313</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Clears the global tracer&#39;s memory of all trace and span context. Useful when it is desired to manually
									start a fresh trace. Normally required only in test suite runs.</p>
								</div>
							</div>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="executetask" class="tsd-anchor"></a>
					<h3>execute<wbr>Task</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">execute<wbr>Task<span class="tsd-signature-symbol">(</span>task<span class="tsd-signature-symbol">: </span><a href="../interfaces/_helpers_utils_.taskopts.html" class="tsd-signature-type">TaskOpts</a>, operation<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, options<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L487">helpers/utils.ts:487</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Registers a <a href="https://www.arangodb.com/docs/3.6/appendix-java-script-modules-tasks.html">task</a> while
										ensuring that the trace context is correctly propagated over to the V8 context where the task is actually
										run. The function executed by the task is wrapped in a new span which carries the same trace context that
									was active at the time of registering the task.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>task: <a href="../interfaces/_helpers_utils_.taskopts.html" class="tsd-signature-type">TaskOpts</a></h5>
									<div class="tsd-comment tsd-typography">
										<p>The object describing the task.</p>
									</div>
								</li>
								<li>
									<h5>operation: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The operation name to be recorded in the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> options: <span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol"> = {}</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											optional <a href="https://opentracing-javascript.surge.sh/interfaces/spanoptions.html">SpanOptions</a> object that
										describes the span.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="executetransaction" class="tsd-anchor"></a>
					<h3>execute<wbr>Transaction</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">execute<wbr>Transaction<span class="tsd-signature-symbol">(</span>data<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Transaction</span>, operation<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, options<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L440">helpers/utils.ts:440</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Start a <a href="https://www.arangodb.com/docs/3.6/transactions-transaction-invocation.html">transaction</a> while
										ensuring that the trace context is correctly propagated over to the V8 context where the transaction is
										actually run. The command executed by the transaction is wrapped in a new span which carries the same
									trace context that was active in the V8 context that invoked the transaction.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>data: <span class="tsd-signature-type">Transaction</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/bbc8c7c7b7e92ba094ea349d56977e00f6f7f42d/types/arangodb/index.d.ts#L910">Transaction</a>
										description.</p>
									</div>
								</li>
								<li>
									<h5>operation: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The operation name to be recorded in the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> options: <span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol"> = {}</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											optional <a href="https://opentracing-javascript.surge.sh/interfaces/spanoptions.html">SpanOptions</a> object that
										describes the span.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="getparent" class="tsd-anchor"></a>
					<h3>get<wbr>Parent</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">get<wbr>Parent<span class="tsd-signature-symbol">(</span>refs<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Reference</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">SpanContext</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L293">helpers/utils.ts:293</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Returns a parent context (if found) from the input array of references.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>refs: <span class="tsd-signature-type">Reference</span><span class="tsd-signature-symbol">[]</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The <a href="https://opentracing-javascript.surge.sh/classes/reference.html">Reference</a> array.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">SpanContext</span></h4>
							<p>The <a href="https://opentracing-javascript.surge.sh/classes/spancontext.html">SpanContext</a> of the
							reference representing the parent, if found, <code>null</code> otherwise.</p>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="inittracer" class="tsd-anchor"></a>
					<h3>init<wbr>Tracer</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">init<wbr>Tracer<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L365">helpers/utils.ts:365</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Initializes the global tracer at application startup. This should be called as early as possible (and only
									once) when application starts.</p>
								</div>
							</div>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="instrumentedquery" class="tsd-anchor"></a>
					<h3>instrumented<wbr>Query</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">instrumented<wbr>Query<span class="tsd-signature-symbol">(</span>query<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Query</span>, operation<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, options<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Cursor</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L602">helpers/utils.ts:602</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Executes the given query inside a new span and returns the resultant cursor. The enclosing span records
									query stats (available within the cursor object) in its logs.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>query: <span class="tsd-signature-type">Query</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The AQL
											<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/bbc8c7c7b7e92ba094ea349d56977e00f6f7f42d/types/arangodb/index.d.ts#L771">Query</a>
										to execute.</p>
									</div>
								</li>
								<li>
									<h5>operation: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The operation name to be recorded in the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> options: <span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol"> = {}</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											optional <a href="https://opentracing-javascript.surge.sh/interfaces/spanoptions.html">SpanOptions</a> object that
										describes the span.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Cursor</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></h4>
							<p>The
								<a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/bbc8c7c7b7e92ba094ea349d56977e00f6f7f42d/types/arangodb/index.d.ts#L781">Cursor</a>
							that is created as a result of running the query.</p>
						</li>
					</ul>
				</section>
				<section class="tsd-panel tsd-member tsd-kind-function tsd-parent-kind-module">
					<a name="startspan" class="tsd-anchor"></a>
					<h3>start<wbr>Span</h3>
					<ul class="tsd-signatures tsd-kind-function tsd-parent-kind-module">
						<li class="tsd-signature tsd-kind-icon">start<wbr>Span<span class="tsd-signature-symbol">(</span>name<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span>, options<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Span</span></li>
					</ul>
					<ul class="tsd-descriptions">
						<li class="tsd-description">
							<aside class="tsd-sources">
								<ul>
									<li>Defined in <a href="https://github.com/RecallGraph/foxx-tracer/blob/c6b7095/src/helpers/utils.ts#L336">helpers/utils.ts:336</a></li>
								</ul>
							</aside>
							<div class="tsd-comment tsd-typography">
								<div class="lead">
									<p>Start a new span. Useful when it is desired to manually start a fresh trace. Normally required only in
									test suite runs.</p>
								</div>
							</div>
							<h4 class="tsd-parameters-title">Parameters</h4>
							<ul class="tsd-parameters">
								<li>
									<h5>name: <span class="tsd-signature-type">string</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The operation name to be recorded in the span.</p>
									</div>
								</li>
								<li>
									<h5><span class="tsd-flag ts-flagDefault value">Default value</span> options: <span class="tsd-signature-type">SpanOptions</span><span class="tsd-signature-symbol"> = {}</span></h5>
									<div class="tsd-comment tsd-typography">
										<p>The
											optional <a href="https://opentracing-javascript.surge.sh/interfaces/spanoptions.html">SpanOptions</a> object that
										describes the span.</p>
									</div>
								</li>
							</ul>
							<h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Span</span></h4>
							<p>The created <a href="https://opentracing-javascript.surge.sh/classes/span.html">Span</a>.</p>
						</li>
					</ul>
				</section>
			</section>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="../globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_helpers_middleware_.html">&quot;helpers/middleware&quot;</a>
					</li>
					<li class="current tsd-kind-module">
						<a href="_helpers_utils_.html">&quot;helpers/utils&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_reporters_foxxreporter_.html">&quot;reporters/<wbr>Foxx<wbr>Reporter&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_reporters_noopreporter_.html">&quot;reporters/<wbr>Noop<wbr>Reporter&quot;</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="_reporters_reporter_.html">&quot;reporters/<wbr>Reporter&quot;</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
					<li class=" tsd-kind-enum tsd-parent-kind-module">
						<a href="../enums/_helpers_utils_.trace_header_keys.html" class="tsd-kind-icon">TRACE_<wbr>HEADER_<wbr>KEYS</a>
					</li>
					<li class=" tsd-kind-interface tsd-parent-kind-module">
						<a href="../interfaces/_helpers_utils_.taskopts.html" class="tsd-kind-icon">Task<wbr>Opts</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#baggageschema" class="tsd-kind-icon">baggage<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#contextschema" class="tsd-kind-icon">context<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#forcesampleschema" class="tsd-kind-icon">force<wbr>Sample<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#logschema" class="tsd-kind-icon">log<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#referenceschema" class="tsd-kind-icon">reference<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#spanarrschema" class="tsd-kind-icon">span<wbr>Arr<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#spanidschema" class="tsd-kind-icon">span<wbr>IdSchema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#spanreqschema" class="tsd-kind-icon">span<wbr>Req<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#spanschema" class="tsd-kind-icon">span<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#tagsschema" class="tsd-kind-icon">tags<wbr>Schema</a>
					</li>
					<li class=" tsd-kind-variable tsd-parent-kind-module">
						<a href="_helpers_utils_.html#traceidschema" class="tsd-kind-icon">trace<wbr>IdSchema</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#attachspan" class="tsd-kind-icon">attach<wbr>Span</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#cleartracecontext" class="tsd-kind-icon">clear<wbr>Trace<wbr>Context</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#executetask" class="tsd-kind-icon">execute<wbr>Task</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#executetransaction" class="tsd-kind-icon">execute<wbr>Transaction</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#getparent" class="tsd-kind-icon">get<wbr>Parent</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#inittracer" class="tsd-kind-icon">init<wbr>Tracer</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#instrumentedquery" class="tsd-kind-icon">instrumented<wbr>Query</a>
					</li>
					<li class=" tsd-kind-function tsd-parent-kind-module">
						<a href="_helpers_utils_.html#startspan" class="tsd-kind-icon">start<wbr>Span</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
</body>
</html>